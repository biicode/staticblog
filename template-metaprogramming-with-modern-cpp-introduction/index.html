<!DOCTYPE html><html
lang="en-US" xmlns:fb="http://ogp.me/ns/fb#" xmlns:addthis="http://www.addthis.com/help/api-spec"  prefix="og: http://ogp.me/ns#">
<!-- Mirrored from blog.biicode.com/template-metaprogramming-with-modern-cpp-introduction/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 03 Jan 2016 00:43:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><link
rel='stylesheet' href='../wp-content/plugins/wp-minify/min/index1667.css?f=wp-content/plugins/wp-currency-converter/css/wp-currency-converter.css,wp-content/plugins/addthis/css/output.css,wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css,wp-content/uploads/sites/2/crayon-syntax-highlighter/themes/biicode/biicode.css,wp-content/plugins/crayon-syntax-highlighter/fonts/inconsolata.css,wp-content/plugins/cookie-law-info/css/cli-style.css,wp-content/themes/truly-minimal-wpcom/style.css,wp-content/plugins/tablepress/css/default.min.css&amp;m=1434970912' type='text/css' media='screen' /> <script type='text/javascript' src='../wp-content/plugins/wp-minify/min/index5cdb.css?f=wp-content/themes/truly-minimal-wpcom/js/html5.js,wp-includes/js/jquery/jquery.js,wp-includes/js/jquery/jquery-migrate.min.js,wp-content/plugins/q2w3-fixed-widget/js/q2w3-fixed-widget.min.js,wp-content/plugins/wp-currency-converter/js/wp-currency-converter.js,wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js,wp-content/plugins/cookie-law-info/js/cookielawinfo.js&amp;m=1434970912'></script> <meta
charset="UTF-8" /><meta
name="viewport" content="width=device-width" /><title>Template Metaprogramming w/ Modern C++ - biicode blog</title><link
rel="profile" href="http://gmpg.org/xfn/11" /><link
rel="pingback" href="../xmlrpc.php" /> <!--[if lt IE 9]> <![endif]--> <script type="text/javascript" src="../../biiwebproduction.s3.amazonaws.com/static/js/home/jquery-1.7.1.min.js"></script> <script type="text/javascript" src="../../biiwebproduction.s3.amazonaws.com/static/js/home/jquery.easing.1.3.js"></script> <script type="text/javascript" src="../../biiwebproduction.s3.amazonaws.com/static/js/nav/nav.js"></script> <meta
name="description" content="Introduction to template metaprogramming with modern C++, what is metaprogramming, how is metaprogramming in C++ and how does it look like."/><link
rel="canonical" href="index.html" /><link
rel="publisher" href="http://plus.google.com/+biicode"/><meta
property="og:locale" content="en_US" /><meta
property="og:type" content="article" /><meta
property="og:title" content="Template Metaprogramming w/ Modern C++ - biicode blog" /><meta
property="og:description" content="Introduction to template metaprogramming with modern C++, what is metaprogramming, how is metaprogramming in C++ and how does it look like." /><meta
property="og:url" content="http://blog.biicode.com/template-metaprogramming-with-modern-cpp-introduction/" /><meta
property="og:site_name" content="biicode Blog" /><meta
property="article:publisher" content="https://www.facebook.com/Biicode" /><meta
property="article:tag" content="c++" /><meta
property="article:tag" content="cpp" /><meta
property="article:tag" content="Learn to code" /><meta
property="article:tag" content="meta-programming" /><meta
property="article:tag" content="modern c++" /><meta
property="article:tag" content="template" /><meta
property="article:section" content="Meta-programming" /><meta
property="article:published_time" content="2014-09-10T12:00:27+00:00" /><meta
property="article:modified_time" content="2014-09-18T16:39:13+00:00" /><meta
property="og:updated_time" content="2014-09-18T16:39:13+00:00" /><meta
property="og:image" content="http://blog.biicode.com/wp-content/uploads/sites/2/2014/09/unnamed-1.jpg" /><meta
property="og:image" content="http://blog.biicode.com/wp-content/uploads/sites/2/2014/09/1.png" /><meta
property="og:image" content="http://blog.biicode.com/wp-content/uploads/sites/2/2014/09/unnamed.jpg" /><link
rel="alternate" type="application/rss+xml" title="biicode Blog &raquo; Feed" href="http://feeds.feedburner.com/biicodeblog" /><link
rel="alternate" type="application/rss+xml" title="biicode Blog &raquo; Comments Feed" href="../comments/feed/index.html" /><meta
name="twitter:card" content="summary_large_image"><meta
name="twitter:creator" content="@Manu343726"><meta
name="twitter:site" content="@biicode"><meta
property="og:title" content="Template Metaprogramming w/ Modern C++ - biicode blog"><meta
property="og:image" content="http://blog.biicode.com/wp-content/uploads/sites/2/2014/11/Logo-biicode-low.png"><meta
property="og:image:width" content="280"><meta
property="og:image:height" content="150"><link
rel="alternate" type="application/rss+xml" title="biicode Blog &raquo; Template Metaprogramming with Modern C++: Introduction Comments Feed" href="feed/index.html" /> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/blog.biicode.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.5"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style><link
rel='stylesheet' id='mailchimpSF_main_css-css'  href='../index2740.html?mcsf_action=main_css&amp;ver=4.2.5' type='text/css' media='all' /> <!--[if IE]><link
rel='stylesheet' id='mailchimpSF_ie_css-css'  href='http://blog.biicode.com/wp-content/plugins/mailchimp/css/ie.css?ver=4.2.5' type='text/css' media='all' /> <![endif]--><link
rel='stylesheet' id='truly-minimal-droid-serif-css'  href='http://fonts.googleapis.com/css?family=Droid+Serif%3A400%2C700%2C400italic%2C700italic&amp;ver=4.2.5' type='text/css' media='all' /><link
rel='stylesheet' id='truly-minimal-droid-sans-css'  href='http://fonts.googleapis.com/css?family=Droid+Sans%3A400%2C700&amp;ver=4.2.5' type='text/css' media='all' /> <script type='text/javascript'>/*  */
var CrayonSyntaxSettings = {"version":"2.7.1","is_admin":"0","ajaxurl":"http:\/\/blog.biicode.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/*  */</script> <link
rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" /><link
rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /><link
rel='shortlink' href='../indexb781.html?p=1531' /> <script data-cfasync="false" src="http://load.sumome.com/" data-sumo-site-id="8d5d163c33e2beb1876a5027edd9a9c4c583be61433be230b24e6bcfc0387265" async></script><script type="text/javascript">var wpccAjaxLink = "../wp-admin/admin-ajax.html";</script>  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-41860930-1', 'auto');
	ga('require', 'displayfeatures');
	ga('set', 'forceSSL', true);
	ga('send', 'pageview');</script>  <script type="text/javascript">jQuery(document).ready(function(e) {
    jQuery('a').click(function(e) {
		var $this = jQuery(this);
      	var href = $this.prop('href').split('?')[0];
		var ext = href.split('.').pop();
		if ('xls,xlsx,doc,docx,ppt,pot,pptx,pdf,pub,txt,zip,rar,tar,7z,gz,exe,wma,mov,avi,wmv,wav,mp3,midi,csv,tsv,jar,psd,pdn,ai,pez,wwf,torrent,cbr'.split(',').indexOf(ext) !== -1) {
        ga('send', 'event', 'Download', ext, href);
      }
	  if (href.toLowerCase().indexOf('mailto:') === 0) {
        ga('send', 'event', 'Mailto', href.substr(7));
      }
	  if (href.toLowerCase().indexOf('tel:') === 0) {
        ga('send', 'event', 'Phone number', href.substr(4));
      }
      if ((this.protocol === 'http:' || this.protocol === 'index.html') && this.hostname.indexOf(document.location.hostname) === -1) {
        ga('send', 'event', 'Outbound', this.hostname, this.pathname);
      }
	});
});</script> <style type="text/css">.site-title a {
			color: #f48123;
		}</style><link
href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'></head><body
class="single single-post postid-1531 single-format-standard group-blog sidebar-right"><div
id="ContainerHeader"> <a
id="forkme" href="https://biicode.github.io/biicode"><img
style="z-index: 4;position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/8b6b8ccc6da3aa5722903da7b58eb5ab1081adee/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="../../s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png"></a><div
id="ContainerwidthHeader"><div
id="header"> <header
id="menu"><div
id="logo"> <a
href="https://www.biicode.com/"><img
src="../wp-content/themes/truly-minimal-wpcom/img/header/biicode-logo.png" alt="Biicode-logo" /></a></div><div
id="search-form"><form
method="get" id="searchform" class="searchform" action="http://blog.biicode.com/" role="search"><div
class="form-container"><input
type="search" class="search-field" name="s" value="" id="s" placeholder="Search in Blog &hellip;" /><div
class="submit-container"><input
name="search" value=""  type="submit" class="submit-bt" /></div></div></form></div> <nav
class="right"><ul><li><a
href="https://www.biicode.com/explore">Explore</a></li><li><a
href="http://web.biicode.com/pricing/">Plans</a></li><li> Learn <img
src="../wp-content/themes/truly-minimal-wpcom/img/header/arrow-drop-down-menu.jpg" style="margin:0px 0px 3px 4px" width="8" height="4" /><ul><li><a
href="http://web.biicode.com/learn/getting-started">Get Started</a></li><li><a
href="https://www.biicode.com/downloads">Downloads</a></li><li><a
href="http://docs.biicode.com/">Docs</a></li><li><a
href="http://forum.biicode.com/">Forum</a></li></ul></li><li><a
href="https://www.biicode.com/accounts/login">Log in</a></li></ul> </nav><div
id="signup-bt"> <img
src="../wp-content/themes/truly-minimal-wpcom/img/header/bt-signup-on.jpg" /> <a
href="https://www.biicode.com/accounts/signup/"><img
class="top" src="../wp-content/themes/truly-minimal-wpcom/img/header/bt-signup-off.jpg" /></a></div> </header></div><p
id="breadcrumbs"><span
xmlns:v="http://rdf.data-vocabulary.org/#"><span
typeof="v:Breadcrumb"><a
href="../index.html" rel="v:url" property="v:title">Biicode Blog</a> » <span
rel="v:child" typeof="v:Breadcrumb"><a
href="../category/meta-programming/index.html" rel="v:url" property="v:title">Meta-programming</a> » <strong
class="breadcrumb_last">Template Metaprogramming with Modern C++: Introduction</strong></span></span></span></p></div></div><div
id="page" class="hfeed site"><div
id="main" class="site-main"><div
id="primary" class="content-area"><div
id="content" class="site-content" role="main"> <article
id="post-1531" class="post-1531 post type-post status-publish format-standard hentry category-meta-programming tag-c tag-cpp tag-learn-to-code tag-meta-programming-2 tag-modern-c tag-template"> <header
class="entry-header"><h1 class="entry-title">Template Metaprogramming with Modern C++: Introduction</h1><div
class="entry-meta"> Posted on <a
href="index.html" title="12:00" rel="bookmark"><time
class="entry-date" datetime="2014-09-10T12:00:27+00:00">September 10, 2014</time></a><span
class="byline"> by <span
class="author vcard"><a
class="url fn n" href="../author/manu343726/index.html" title="View all posts by Manu Sánchez" rel="author">Manu Sánchez</a></span></span></div> </header><div
class="entry-content"> <article
class="markdown-body entry-content"><h1><a
class="anchor" href="#template-metaprogramming-with-modern-c-introduction" name="user-content-template-metaprogramming-with-modern-c-introduction"></a>Template Metaprogramming with Modern C++: Introduction</h1><blockquote><p><em>Any sufficiently complex C++ code is indistinguishable from trolling</em></p><p>Arthur C. Clarke</p></blockquote><h2><a
class="anchor" href="#preface" name="user-content-preface"></a>Preface</h2><p>Template metaprogramming is one of the things that makes C++ that complex, poor known, and sometimes horrible language. However, its power and expressiveness are some of the best features of C++.</p><p>Extensible and fully generic C++ libraries aren&#8217;t possible without template metapogramming. Even the Standard Library implementations hide many template metaprogramming tricks to make standard containers and algorithms that generic, high level, and efficient tools we use everyday.</p><p>The fact that tmp is a powerful tool can be seen in the evolution of the language, which now has features designed to improve metaprogramming, see C++11 <code>&lt;type_traits&gt;</code>, C++11 variadic templates, C++14 variable templates, C++14<code>std::integer_sequence</code>, etc.</p><div
id="attachment_1648" style="width: 235px" class="wp-caption aligncenter"><img
class="wp-image-1648 size-full" title="A rendering example of the metatrace compile-time raytracer" src="../wp-content/uploads/sites/2/2014/09/unnamed-1.jpg" alt="template metaprogramming" width="225" height="224" /><p
class="wp-caption-text">Credit: https://gitorious.org/metatrace</p></div><p><span
id="more-1531"></span></p><p>But C++ template metaprogramming power comes at a high cost: Its really hard to do and understand. The template system was not originally designed to do such things, and that&#8217;s reflected primarily in the cumbersome syntax involved and the cryptic error messages one get when something fails. Those are the reasons why people is usually scared by tmp, and most of us doesn&#8217;t even try to use it.</p><p>These posts try to introduce template metaprogramming to the average C++ programmer, showing how it works, what can do, and finally leading with its problems trying to make it easier than in the old days of C++98, thanks to C++11 and C++14 language improvements.</p><hr
/><h2><a
class="anchor" href="#but-what-ismetaprogramming" name="user-content-but-what-ismetaprogramming"></a><br
/> But, what is <em>metaprogramming</em>?</h2><p>From Wikipedia:</p><blockquote><p>Metaprogramming is the writing of computer programs that write or manipulate other programs (or themselves) as their data, or that do part of the work at compile time that would otherwise be done at run-time.</p></blockquote><p>So instead of writing code that is compiled and does something at run-time (i.e. represents some actions to be done at run-time), we write code (<em>meta-code?</em>) that generates code. Let me show you a simple example:</p><div
id="crayon-56886be90e8a7319355668" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
#define MIN(x,y) (((x) &gt; (y)) ? (x) : (y))</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8a7319355668-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8a7319355668-1"><span
class="crayon-p">#define MIN(x,y) (((x) &gt; (y)) ? (x) : (y))</span></div></div></td></tr></table></div></div><p>C parameterized macros could be viewed as metaprogramming functions, <em>metafunctions</em>. That is, a function that takes some parameters and generates C code. If you use that macro:</p><div
id="crayon-56886be90e8b9376888465" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
int main()
{
    int a , b , c = MIN(a,b);
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8b9376888465-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8b9376888465-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e8b9376888465-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8b9376888465-4">4</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8b9376888465-1"><span
class="crayon-t">int</span><span
class="crayon-h"> </span><span
class="crayon-e">main</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8b9376888465-2"><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-56886be90e8b9376888465-3"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-t">int</span><span
class="crayon-h"> </span><span
class="crayon-i">a</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-i">b</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">c</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">MIN</span><span
class="crayon-sy">(</span><span
class="crayon-v">a</span><span
class="crayon-sy">,</span><span
class="crayon-v">b</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8b9376888465-4"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p><em>Please ignore the UB, is just an example.</em></p><p>The C preprocessor parses that macro, interprets its arguments, and returns the code <code>(((a) &gt; (b)) ? (a) : (b))</code>, so the resulting code becomes:</p><div
id="crayon-56886be90e8c3288283958" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
int main()
{
    int a , b , c = (((a) &lt; (b)) ? (a) : (b));
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8c3288283958-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8c3288283958-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e8c3288283958-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8c3288283958-4">4</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8c3288283958-1"><span
class="crayon-t">int</span><span
class="crayon-h"> </span><span
class="crayon-e">main</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8c3288283958-2"><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-56886be90e8c3288283958-3"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-t">int</span><span
class="crayon-h"> </span><span
class="crayon-i">a</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-i">b</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">c</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-v">a</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">&lt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">b</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">?</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">a</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">b</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8c3288283958-4"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>Reflection, the ability of some programming languages to inspect type and code information at runtime and modify it, could be another type of metaprogramming.</p><hr
/><h2><a
class="anchor" href="#c-template-metaprogramming" name="user-content-c-template-metaprogramming"></a><br
/> C++ Template Metaprogramming</h2><p>Template metaprogramming, sometimes shorted to <em>tmp</em>, consists in <strong>using the C++ template system to generate C++ types, and C++ code in the process</strong>.</p><p>Consider what a C++ template is: As the name says, <strong>it&#8217;s only a template</strong>. A template function is not a function at all, it is <strong>a template to generate functions</strong>, and the same for class templates.</p><p>That wonderful thing we all love, <code>std::vector</code>, is not a class. Is a template designed to generate a correct vector class for each type. When we <strong><em>instance</em></strong> a template, like <code>std::vector&lt;int&gt;</code>, then the compiler generates the code for a vector of ints, following the template the Standard Library developer provided.</p><p>So if we write a template <code>foo</code> parameterized with a type parameter:</p><div
id="crayon-56886be90e8cd403556112" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
template&lt;typename T&gt;
struct foo
{
    T elem;
};</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8cd403556112-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8cd403556112-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e8cd403556112-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8cd403556112-4">4</div><div
class="crayon-num" data-line="crayon-56886be90e8cd403556112-5">5</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8cd403556112-1"><span
class="crayon-e">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename</span><span
class="crayon-h"> </span><span
class="crayon-e">T</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8cd403556112-2"><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">foo</span></div><div
class="crayon-line" id="crayon-56886be90e8cd403556112-3"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8cd403556112-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-i">T</span><span
class="crayon-h"> </span><span
class="crayon-v">elem</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e8cd403556112-5"><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>and then that template is instanced:</p><div
id="crayon-56886be90e8d6989620509" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
typedef foo&lt;int&gt; fooint;
typedef foo&lt;char&gt; foochar;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8d6989620509-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8d6989620509-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8d6989620509-1"><span
class="crayon-r">typedef</span><span
class="crayon-h"> </span><span
class="crayon-v">foo</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-v">fooint</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8d6989620509-2"><span
class="crayon-r">typedef</span><span
class="crayon-h"> </span><span
class="crayon-v">foo</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">char</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-v">foochar</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>and the compiler generates different versions of the <code>foo</code> struct, <strong>one for each different combinations of template parameters</strong>:</p><div
id="crayon-56886be90e8df409268707" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
struct foo_int
{
    int elem;
};
struct foo_char
{
    char elem;
};
typedef foo_int fooint;
typedef foo_char foochar;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8df409268707-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8df409268707-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e8df409268707-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8df409268707-4">4</div><div
class="crayon-num" data-line="crayon-56886be90e8df409268707-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8df409268707-6">6</div><div
class="crayon-num" data-line="crayon-56886be90e8df409268707-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8df409268707-8">8</div><div
class="crayon-num" data-line="crayon-56886be90e8df409268707-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8df409268707-10">10</div><div
class="crayon-num" data-line="crayon-56886be90e8df409268707-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8df409268707-12">12</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8df409268707-1"><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">foo_int</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8df409268707-2"><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-56886be90e8df409268707-3"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-t">int</span><span
class="crayon-h"> </span><span
class="crayon-v">elem</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8df409268707-4"><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e8df409268707-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8df409268707-6"><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">foo_char</span></div><div
class="crayon-line" id="crayon-56886be90e8df409268707-7"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8df409268707-8"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-t">char</span><span
class="crayon-h"> </span><span
class="crayon-v">elem</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e8df409268707-9"><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8df409268707-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div
class="crayon-line" id="crayon-56886be90e8df409268707-11"><span
class="crayon-r">typedef</span><span
class="crayon-h"> </span><span
class="crayon-e">foo_int </span><span
class="crayon-v">fooint</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8df409268707-12"><span
class="crayon-r">typedef</span><span
class="crayon-h"> </span><span
class="crayon-e">foo_char </span><span
class="crayon-v">foochar</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p><em>Note that the generated classes <code>foo_int</code> and <code>foo_char</code> are not written in your source file at all, like what the C preprocessor does. The template instantiation is managed internally by the compiler. I wrote them in that way to make a clear example.</em></p><div
id="attachment_1647" style="width: 802px" class="wp-caption aligncenter"><img
class="wp-image-1647" src="../wp-content/uploads/sites/2/2014/09/1.png" alt="template metaprogramming tree diagram" width="792" height="326" /><p
class="wp-caption-text">Credit: http://plc.inf.elte.hu/templight/</p></div><p>As you can see, the C++ template system actually generates code. We, as C++ <em>metaprogrammers</em>, explode this to generate some code automatically.</p><hr
/><h2><a
class="anchor" href="#metafunctions" name="user-content-metafunctions"></a><br
/> Metafunctions</h2><p>In the C preprocessor example, we introduced the concept of <em>metafunction</em>. In general a metafunction is a function working in the specific metaprogramming domain we are. In the case of C preprocessor, we manipulate C sourcecode explicitly, so its metafunctions (macros) take and manipulate C source.</p><p>In C++ template metaprogramming we work with types, so a metafunction is a function working with types. C++ templates could take non-type parameters too, but its hard to be generic using heterogeneous categories of template parameters. Instead, we will work with type parameters only whenever possible.</p><div
id="crayon-56886be90e8e9682552657" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
 template&lt;typename T&gt;
 struct identity
 {
     using type = T;
 };</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8e9682552657-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8e9682552657-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e8e9682552657-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e8e9682552657-4">4</div><div
class="crayon-num" data-line="crayon-56886be90e8e9682552657-5">5</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8e9682552657-1"><span
class="crayon-h"> </span><span
class="crayon-e">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename</span><span
class="crayon-h"> </span><span
class="crayon-e">T</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8e9682552657-2"><span
class="crayon-h"> </span><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">identity</span></div><div
class="crayon-line" id="crayon-56886be90e8e9682552657-3"><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e8e9682552657-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class="crayon-e">using </span><span
class="crayon-v">type</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">T</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e8e9682552657-5"><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>The template <code>identity</code> is a metafunction representing the identity function: Takes a value (Actually a type, since we work with types) and returns itself untouched.</p><p>We can <em>&#8220;call&#8221;</em> that metafunction referencing its member type <code>type</code>:</p><div
id="crayon-56886be90e8f3139004719" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
using t = typename identity&lt;int&gt;::type; // t is int</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8f3139004719-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8f3139004719-1"><span
class="crayon-i">using</span><span
class="crayon-h"> </span><span
class="crayon-v">t</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">identity</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">// t is int</span></div></div></td></tr></table></div></div><p>Of course nested metafunction <em>calls</em> are possible:</p><div
id="crayon-56886be90e8fc824383755" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
using t = typename identity&lt;typename identity&lt;int&gt;::type&gt;::type; //t is int</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e8fc824383755-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e8fc824383755-1"><span
class="crayon-i">using</span><span
class="crayon-h"> </span><span
class="crayon-v">t</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">identity</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename </span><span
class="crayon-v">identity</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">//t is int</span></div></div></td></tr></table></div></div><p>But that <code>typename ::type</code> syntax doesn&#8217;t scale well. Consider a more complex example:</p><div
id="crayon-56886be90e905309792173" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
using t = typename add&lt;typename add&lt;std::integral_constant&lt;int,1&gt;,std::integral_constant&lt;int,2&gt;&gt;::type,
                       std::integral_constant&lt;int,-2&gt;
                      &gt;::type;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e905309792173-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e905309792173-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e905309792173-3">3</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e905309792173-1"><span
class="crayon-i">using</span><span
class="crayon-h"> </span><span
class="crayon-v">t</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">add</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename </span><span
class="crayon-v">add</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">std</span><span
class="crayon-o">::</span><span
class="crayon-v">integral_constant</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-sy">,</span><span
class="crayon-cn">1</span><span
class="crayon-o">&gt;</span><span
class="crayon-sy">,</span><span
class="crayon-v">std</span><span
class="crayon-o">::</span><span
class="crayon-v">integral_constant</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-sy">,</span><span
class="crayon-cn">2</span><span
class="crayon-o">&gt;&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e905309792173-2"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class="crayon-v">std</span><span
class="crayon-o">::</span><span
class="crayon-v">integral_constant</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-sy">,</span><span
class="crayon-o">-</span><span
class="crayon-cn">2</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-56886be90e905309792173-3"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>There are a few possible solutions to this problem:</p><h3><a
class="anchor" href="#use-aliases-to-the-result-instead-of-the-metafunction-itself" name="user-content-use-aliases-to-the-result-instead-of-the-metafunction-itself"></a>Use aliases to the result instead of the metafunction itself</h3><p>Since C++11 we have <em>template aliases</em>, a kind of parametrized typedef. We can use them to write <em>user-side metafunctions</em>:</p><div
id="crayon-56886be90e90e173141037" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
 template&lt;typename LHS , typename RHS&gt;
 using add = typename impl::add&lt;LHS,RHS&gt;::type;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e90e173141037-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e90e173141037-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e90e173141037-1"><span
class="crayon-h"> </span><span
class="crayon-v">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename </span><span
class="crayon-i">LHS</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">RHS</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e90e173141037-2"><span
class="crayon-h"> </span><span
class="crayon-e">using </span><span
class="crayon-v">add</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">impl</span><span
class="crayon-o">::</span><span
class="crayon-v">add</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">LHS</span><span
class="crayon-sy">,</span><span
class="crayon-v">RHS</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>Where <code>add</code> is the <em>metafunction</em> for the user, and <code>impl::add</code> is the class template that actually implements the metafunction. This allows us to write nested expressions in a clear way:</p><div
id="crayon-56886be90e918983681859" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
using t = add&lt;std::integral_constant&lt;int,1&gt;,add&lt;std::integral_constant&lt;int,-2&gt;,std::integral_constant&lt;int,-4&gt;&gt;;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e918983681859-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e918983681859-1"><span
class="crayon-i">using</span><span
class="crayon-h"> </span><span
class="crayon-v">t</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">add</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">std</span><span
class="crayon-o">::</span><span
class="crayon-v">integral_constant</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-sy">,</span><span
class="crayon-cn">1</span><span
class="crayon-o">&gt;</span><span
class="crayon-sy">,</span><span
class="crayon-v">add</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">std</span><span
class="crayon-o">::</span><span
class="crayon-v">integral_constant</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-sy">,</span><span
class="crayon-o">-</span><span
class="crayon-cn">2</span><span
class="crayon-o">&gt;</span><span
class="crayon-sy">,</span><span
class="crayon-v">std</span><span
class="crayon-o">::</span><span
class="crayon-v">integral_constant</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-sy">,</span><span
class="crayon-o">-</span><span
class="crayon-cn">4</span><span
class="crayon-o">&gt;&gt;</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p></p><h3><a
class="anchor" href="#build-an-expression-evaluation-system" name="user-content-build-an-expression-evaluation-system"></a>Build an expression evaluation system</h3><p>The above approach hides the machinery to the user. But hidding means that those user side metafunctions are not metafunctions but aliases to their result. That means we cannot use user-side aliases in contexts expecting metafunctions: <strong>User-side metafunctions are not first class functions</strong>.</p><p>Instead, we could build an expression evaluation system which takes an expresssion (A template with its parameters) and evaluate it saying <em>&#8220;Is this a metafunction? Ok, so I should get its result via <code>typename ::type</code>&#8220;</em>. This approach has the advantage that one could customize the evaluation and design it for many complex cases. The simplest one, before evaluating a metafunction evaluate its parameters.</p><p>This is what I did for <a
href="https://github.com/Manu343726/Turbo">Turbo</a>, and Boost.MPL.Lambda takes a similar approach:</p><div
id="crayon-56886be90e922109305056" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
//https://www.biicode.com/manu343726/manu343726/turbo_core/master
#include "manu343726/turbo_core/turbo_core.hpp"
using tml::placeholders::_1;
using tml::placeholders::_2;
//t is tml::Int&lt;3&gt; (std::integral_constant&lt;int,3&gt;)
using t = tml::eval&lt;tml::lambda&lt;_1,_2 , tml::add&lt;_1,_2&gt;&gt; , tml::Int&lt;1&gt;,tml::Int&lt;2&gt;&gt;;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e922109305056-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e922109305056-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e922109305056-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e922109305056-4">4</div><div
class="crayon-num" data-line="crayon-56886be90e922109305056-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e922109305056-6">6</div><div
class="crayon-num" data-line="crayon-56886be90e922109305056-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e922109305056-8">8</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e922109305056-1"><span
class="crayon-c">//https://www.biicode.com/manu343726/manu343726/turbo_core/master</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e922109305056-2"><span
class="crayon-p">#include "manu343726/turbo_core/turbo_core.hpp"</span></div><div
class="crayon-line" id="crayon-56886be90e922109305056-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e922109305056-4"><span
class="crayon-e">using </span><span
class="crayon-v">tml</span><span
class="crayon-o">::</span><span
class="crayon-v">placeholders</span><span
class="crayon-o">::</span><span
class="crayon-v">_1</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e922109305056-5"><span
class="crayon-e">using </span><span
class="crayon-v">tml</span><span
class="crayon-o">::</span><span
class="crayon-v">placeholders</span><span
class="crayon-o">::</span><span
class="crayon-v">_2</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e922109305056-6">&nbsp;</div><div
class="crayon-line" id="crayon-56886be90e922109305056-7"><span
class="crayon-c">//t is tml::Int&lt;3&gt; (std::integral_constant&lt;int,3&gt;)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e922109305056-8"><span
class="crayon-i">using</span><span
class="crayon-h"> </span><span
class="crayon-v">t</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">tml</span><span
class="crayon-o">::</span><span
class="crayon-v">eval</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">tml</span><span
class="crayon-o">::</span><span
class="crayon-v">lambda</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">_1</span><span
class="crayon-sy">,</span><span
class="crayon-i">_2</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">tml</span><span
class="crayon-o">::</span><span
class="crayon-v">add</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">_1</span><span
class="crayon-sy">,</span><span
class="crayon-v">_2</span><span
class="crayon-o">&gt;&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">tml</span><span
class="crayon-o">::</span><span
class="crayon-t">Int</span><span
class="crayon-o">&lt;</span><span
class="crayon-cn">1</span><span
class="crayon-o">&gt;</span><span
class="crayon-sy">,</span><span
class="crayon-v">tml</span><span
class="crayon-o">::</span><span
class="crayon-t">Int</span><span
class="crayon-o">&lt;</span><span
class="crayon-cn">2</span><span
class="crayon-o">&gt;&gt;</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p></p><h3><a
class="anchor" href="#c14-variable-templates-stop-doing-ugly-template-metaprogramming-and-use-a-natural-syntax" name="user-content-c14-variable-templates-stop-doing-ugly-template-metaprogramming-and-use-a-natural-syntax"></a>C++14 variable templates: Stop doing ugly template metaprogramming and use a natural syntax</h3><p>This last approach is available since C++14 thanks to <em>variable templates</em>. A variable template is a constant parametrized with a template. The canonical example is a <code>pi</code> constant aware of the precision of the type used:</p><div
id="crayon-56886be90e92b344890281" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
template&lt;typename T&gt;
constexpr T pi = 3.141592654;
float radious = 1.0f;
float circle  = pi&lt;float&gt;*pi&lt;float&gt;*radious;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e92b344890281-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e92b344890281-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e92b344890281-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e92b344890281-4">4</div><div
class="crayon-num" data-line="crayon-56886be90e92b344890281-5">5</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e92b344890281-1"><span
class="crayon-v">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-i">typename</span><span
class="crayon-h"> </span><span
class="crayon-v">T</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e92b344890281-2"><span
class="crayon-i">constexpr</span><span
class="crayon-h"> </span><span
class="crayon-i">T</span><span
class="crayon-h"> </span><span
class="crayon-v">pi</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-cn">3.141592654</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e92b344890281-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e92b344890281-4"><span
class="crayon-t">float</span><span
class="crayon-h"> </span><span
class="crayon-v">radious</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-cn">1.0f</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e92b344890281-5"><span
class="crayon-t">float</span><span
class="crayon-h"> </span><span
class="crayon-v">circle</span><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">pi</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">float</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">*</span><span
class="crayon-v">pi</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">float</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">*</span><span
class="crayon-v">radious</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>Variable templates are <strong>values parametrized with templates</strong>, instead of types. So we can use <code>constexpr</code> functions instead of template metafunctions to operate even with types (Imagine a variable template acting as a box for a type).</p><p>See <a
href="https://github.com/ldionne/hana">Boost.Hanna</a> for an example of this approach.</p><hr
/><h2><a
class="anchor" href="#a-haskell-like-language-inside-c" name="user-content-a-haskell-like-language-inside-c"></a><br
/> A Haskell-like language inside C++</h2><p><img
class="aligncenter wp-image-1649 size-full" src="../wp-content/uploads/sites/2/2014/09/unnamed.jpg" alt="template metaprogramming meme" width="568" height="335" /></p><p>Since we work with the C++ type system, using types as values for our computations, tmp works like a functional programming language; because metafunctions have no side effects: <strong>We can only create types, not to modify existing ones</strong>.<br
/> And like in a functional language, one of the pillars of tmp is <strong>recursion</strong>. In this case <strong><em>recursive template instantiations </em></strong>(Remember that name).</p><div
id="crayon-56886be90e936902003196" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
template&lt;typename T&gt;
struct throw_stars
{
    using type = T;
};
template&lt;typename T&gt;
struct throw_stars&lt;T*&gt;
{
    using type = typename throw_stars&lt;T&gt;::type;
};</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e936902003196-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e936902003196-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e936902003196-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e936902003196-4">4</div><div
class="crayon-num" data-line="crayon-56886be90e936902003196-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e936902003196-6">6</div><div
class="crayon-num" data-line="crayon-56886be90e936902003196-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e936902003196-8">8</div><div
class="crayon-num" data-line="crayon-56886be90e936902003196-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e936902003196-10">10</div><div
class="crayon-num" data-line="crayon-56886be90e936902003196-11">11</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e936902003196-1"><span
class="crayon-e">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename</span><span
class="crayon-h"> </span><span
class="crayon-e">T</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e936902003196-2"><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">throw_stars</span></div><div
class="crayon-line" id="crayon-56886be90e936902003196-3"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e936902003196-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">using </span><span
class="crayon-v">type</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">T</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e936902003196-5"><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e936902003196-6">&nbsp;</div><div
class="crayon-line" id="crayon-56886be90e936902003196-7"><span
class="crayon-e">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename</span><span
class="crayon-h"> </span><span
class="crayon-e">T</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e936902003196-8"><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">throw_stars</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">T</span><span
class="crayon-o">*</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-56886be90e936902003196-9"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e936902003196-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">using </span><span
class="crayon-v">type</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">throw_stars</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">T</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e936902003196-11"><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>I think the classic factorial/Fibonacci metafunctions examples are so boring. Here is something more interesting: The template <code>throw_stars</code> is a metafunction that takes a type and throws away all the <em>&#8220;stars&#8221;</em>.</p><div
id="crayon-56886be90e93f914988578" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
using t = typename throw_stars&lt;int********&gt;::type; //t is int </textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e93f914988578-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e93f914988578-1"><span
class="crayon-i">using</span><span
class="crayon-h"> </span><span
class="crayon-v">t</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">throw_stars</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-o">*</span><span
class="crayon-o">*</span><span
class="crayon-o">*</span><span
class="crayon-o">*</span><span
class="crayon-o">*</span><span
class="crayon-o">*</span><span
class="crayon-o">*</span><span
class="crayon-o">*</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">//t is int </span></div></div></td></tr></table></div></div><p>The template specialization acts as the recursive case, and the main template as the base case. Note how C++ template specialization behaves like pattern matching.</p><p>Another example could be traversing of C++11 variadic packs:</p><div
id="crayon-56886be90e948233049402" class="crayon-syntax crayon-theme-biicode crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span
class="crayon-title"></span><div
class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div
class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-expand-button" title="Expand Code"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-copy-button" title="Copy"><div
class="crayon-button-icon"></div></div><div
class="crayon-button crayon-popup-button" title="Open Code In New Window"><div
class="crayon-button-icon"></div></div></div></div><div
class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 15px !important;">
template&lt;typename HEAD , typename... TAIL&gt;
struct last
{
    using type = typename last&lt;TAIL...&gt;::type;
};
template&lt;typename T&gt;
struct last&lt;T&gt;
{
    using type = T;
};
using t = typename last&lt;int,char,bool,double&gt;::type; //t is double</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 14px !important; line-height: 15px !important;"><div
class="crayon-num" data-line="crayon-56886be90e948233049402-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e948233049402-2">2</div><div
class="crayon-num" data-line="crayon-56886be90e948233049402-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e948233049402-4">4</div><div
class="crayon-num" data-line="crayon-56886be90e948233049402-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e948233049402-6">6</div><div
class="crayon-num" data-line="crayon-56886be90e948233049402-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e948233049402-8">8</div><div
class="crayon-num" data-line="crayon-56886be90e948233049402-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e948233049402-10">10</div><div
class="crayon-num" data-line="crayon-56886be90e948233049402-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-56886be90e948233049402-12">12</div><div
class="crayon-num" data-line="crayon-56886be90e948233049402-13">13</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 14px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-56886be90e948233049402-1"><span
class="crayon-v">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename </span><span
class="crayon-i">HEAD</span><span
class="crayon-h"> </span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">typename</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-h"> </span><span
class="crayon-e">TAIL</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e948233049402-2"><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">last</span></div><div
class="crayon-line" id="crayon-56886be90e948233049402-3"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e948233049402-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">using </span><span
class="crayon-v">type</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">last</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">TAIL</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e948233049402-5"><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e948233049402-6">&nbsp;</div><div
class="crayon-line" id="crayon-56886be90e948233049402-7"><span
class="crayon-e">template</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">typename</span><span
class="crayon-h"> </span><span
class="crayon-e">T</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e948233049402-8"><span
class="crayon-t">struct</span><span
class="crayon-h"> </span><span
class="crayon-e">last</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">T</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-56886be90e948233049402-9"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e948233049402-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">using </span><span
class="crayon-v">type</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">T</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-56886be90e948233049402-11"><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-56886be90e948233049402-12">&nbsp;</div><div
class="crayon-line" id="crayon-56886be90e948233049402-13"><span
class="crayon-i">using</span><span
class="crayon-h"> </span><span
class="crayon-v">t</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">typename </span><span
class="crayon-v">last</span><span
class="crayon-o">&lt;</span><span
class="crayon-t">int</span><span
class="crayon-sy">,</span><span
class="crayon-t">char</span><span
class="crayon-sy">,</span><span
class="crayon-t">bool</span><span
class="crayon-sy">,</span><span
class="crayon-t">double</span><span
class="crayon-o">&gt;</span><span
class="crayon-o">::</span><span
class="crayon-v">type</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">//t is double</span></div></div></td></tr></table></div></div><p>which is a great example of a <code>head:tail</code> approach for list traversing common in functional languages.</p><hr
/><h2><a
class="anchor" href="#summary" name="user-content-summary"></a><br
/> Summary</h2><p>In this first approach to C++ template metaprogramming we have seen that:</p><ul
class="task-list"><li><strong><em>Metaprogramming</em></strong> is the process of writing code to generate code, that is, automatize code generation.</li><li><strong>C++ template metaprogramming uses the template system to generate types, and code in the process</strong>: We generate types using templates, and we actually use those types to do computations or to generate the desired code.</li><li><strong>The basic unit of metaprogramming is the</strong> <strong><em>metafunction</em></strong>, as in common programming the basic unit is the function. Metafunctions manipulate entities of their specific metaprogramming domain. In C++ template metaprogramming, those entities are types, and metafunctions are represented through templates.</li><li><strong>Template metaprogramming is like a functional language embedded into C++ itself</strong>. That &#8220;<em>language</em>&#8221; has no side effects (We cannot modify an existing type, only create new ones), so we use the same patterns as in a functional programming language such as Haskell or F#.</li></ul><p>Now we have a good overview of what C++ template metaprogramming is, but we need some C++ knowledge before getting into it.<br
/> The next time we will learn C++ templates in depth: Template parameters, template specialization, SFINAE, etc; to make sure we all have and understand the necessary tools to do proper metaprogramming in Modern C++.</p><p><em>Written by <a
href="https://twitter.com/Manu343726">Manu Sánchez</a>.</em></p> </article><div
id="ContainerFriendsSubscribe"><div
class="mc_custom_border_hdr">Stay tuned</div><style>.widget_mailchimpsf_widget .widget-title {
		line-height: 1.4em;
		margin-bottom: 0.75em;
	}
	#mc_subheader {
		line-height: 1.25em;
		margin-bottom: 18px;
	}
	.mc_merge_var {
		margin-bottom: 1.0em;
	}
	.mc_var_label,
	.mc_interest_label {
		display: block;
		margin-bottom: 0.5em;
	}
	.mc_input {
		-moz-box-sizing: border-box;
		-webkit-box-sizing: border-box;
		box-sizing: border-box;
		width: 100%;
	}
	.mc_input.mc_phone {
		width: auto;
	}
	select.mc_select {
		margin-top: 0.5em;
		width: 100%;
	}
	.mc_address_label {
		margin-top: 1.0em;
		margin-bottom: 0.5em;
		display: block;
	}
	.mc_address_label ~ select {
		width: 100%;
	}
	.mc_list li {
		list-style: none;
		background: none !important;
	}
	.mc_interests_header {
		margin-top: 1.0em;
		margin-bottom: 0.5em;
	}
	.mc_interest label,
	.mc_interest input {
		margin-bottom: 0.4em;
	}
	#mc_signup_submit {
		margin-top: 1.5em;
		width: 80%;
	}
	#mc_unsub_link a {
		font-size: 0.75em;
	}
	#mc_unsub_link {
		margin-top: 1.0em;
	}
	.mc_header_address,
	.mc_email_format {
		display: block;
		font-weight: bold;
		margin-top: 1.0em;
		margin-bottom: 0.5em;
	}
	.mc_email_options {
		margin-top: 0.5em;
	}
	.mc_email_type {
		padding-left: 4px;
	}</style><div
id="mc_signup"><form
method="post" action="#mc_signup" id="mc_signup_form"> <input
type="hidden" id="mc_submit_type" name="mc_submit_type" value="html" /> <input
type="hidden" name="mcsf_action" value="mc_submit_signup_form" /> <input
type="hidden" id="_mc_submit_signup_form_nonce" name="_mc_submit_signup_form_nonce" value="528a10d57f" /><div
class="mc_form_inside"><div
class="updated" id="mc_message"></div><div
class="mc_merge_var"> <label
for="mc_mv_EMAIL" class="mc_var_label mc_header mc_header_email">Email Address</label> <input
type="text" size="18" placeholder="" name="mc_mv_EMAIL" id="mc_mv_EMAIL" class="mc_input"/></div><div
class="mc_signup_submit"> <input
type="submit" name="mc_signup_submit" id="mc_signup_submit" value="Send" class="button" /></div></div></form></div></div><p></p><hr
class="dot-line" />Related Posts<ul><li><a
href="../template-metaprogramming-cpp-ii/index.html" title="Template Metaprogramming with Modern C++: templates in depth">Template Metaprogramming with Modern C++: templates in depth</a></li><li><a
href="../meta-configuration-cpp-projects-cmake/index.html" title="Meta-configuration with CMake of C/C++ projects">Meta-configuration with CMake of C/C++ projects</a></li><li><a
href="../a-tiny-metaprogramming-lib-metafunctions/index.html" title="A Tiny Metaprogramming Library: Extending the Metaphor, entering metafunctions">A Tiny Metaprogramming Library: Extending the Metaphor, entering metafunctions</a></li><li><a
href="../template-metaprogramming-modern-cpp-haskell-metaphor/index.html" title="Metaprogramming with Modern C++: The Haskell Metaphor">Metaprogramming with Modern C++: The Haskell Metaphor</a></li></ul><div
class="addthis_toolbox addthis_default_style addthis_32x32_style" addthis:url='http://blog.biicode.com/template-metaprogramming-with-modern-cpp-introduction/' addthis:title='Template Metaprogramming with Modern C++: Introduction' ><a
class="addthis_button_facebook"></a><a
class="addthis_button_twitter"></a><a
class="addthis_button_google_plusone_share"></a><a
class="addthis_button_compact"></a><a
class="addthis_counter addthis_bubble_style"></a></div></div> <footer
class="entry-meta"> This entry was posted in <a
href="../category/meta-programming/index.html" rel="category tag">Meta-programming</a> and tagged <a
href="../tag/c/index.html" rel="tag">c++</a>, <a
href="../tag/cpp/index.html" rel="tag">cpp</a>, <a
href="../tag/learn-to-code/index.html" rel="tag">Learn to code</a>, <a
href="../tag/meta-programming-2/index.html" rel="tag">meta-programming</a>, <a
href="../tag/modern-c/index.html" rel="tag">modern c++</a>. Bookmark the <a
href="index.html" title="Permalink to Template Metaprogramming with Modern C++: Introduction" rel="bookmark">permalink</a>. </footer> </article> <nav
role="navigation" id="nav-below" class="navigation-post"><h1 class="screen-reader-text">Post navigation</h1><div
class="previous"><a
href="../tos-dont-like-well-others/index.html" rel="prev"><span
class="meta-nav">&larr;</span> Those are my ToS, and if you don&#8217;t like them&#8230;well I have others.</a></div><div
class="next"><a
href="../zeromq-cpp-biicode/index.html" rel="next">Rapid prototyping and teaching ZeroMQ in C++ with biicode. <span
class="meta-nav">&rarr;</span></a></div> </nav><div
id="disqus_thread"><div
id="dsq-content"><ul
id="dsq-comments"><li
class="post pingback"><p>Pingback: <a
href='../template-metaprogramming-modern-c-templates-depth/index.html' rel='external nofollow' class='url'>Template Metaprogramming w/ Modern C++ (II) - biicode blog</a>()</p></li></li><li
class="post pingback"><p>Pingback: <a
href='../cpp-madrid-meetup-template-metaprogramming/index.html' rel='external nofollow' class='url'>C/C++ Madrid meetup @ biicode | biicode Blog</a>()</p></li></li></ul></div></div> <script type="text/javascript">var disqus_url = 'index.html';
var disqus_identifier = '1531%20http_/blog.biicode.com/indexb781.html?p=1531';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'biicodeblog';
var disqus_title = "Template Metaprogramming with Modern C++: Introduction";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    this.language = '';
        this.callbacks.onReady.push(function () {
        // sync comments in the background so we don't block the page
        var script = document.createElement('script');
        script.async = true;
        script.src = 'indexb9bd.html?cf_action=sync_comments&amp;post_id=1531';
        var firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(script, firstScript);
    });
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script> </div></div><div
id="secondary" class="widget-area" role="complementary"> <aside
id="text-2" class="widget widget_text"><div
class="textwidget"><p
class="widgettitleWhatwedo" align="center"> biicode is:</p><p
class="hrOrange">&nbsp;</p><p
align="center" class="widgetxtWhatwedo">For <span
style="font-weight:normal">C/C++ developers,</span> biicode is a file-based dependencies manager that makes code reuse simple.</p><div
id="Sidebar-Tryforfree"> <img
src="../wp-content/uploads/sites/3/2014/05/try-it-for-free-on.jpg" /> <a
href="http://www.biicode.com/downloads"><img
class="top" src="../wp-content/uploads/sites/3/2014/05/try-it-for-free-off.jpg" /></a></div></div> </aside><aside
id="text-3" class="widget widget_text"><div
class="textwidget"> <a
href="https://www.biicode.com/biicode-open-source-challenge"><img
src="../wp-content/uploads/sites/3/2014/05/banner-open-source.jpg" /></a></div> </aside><aside
id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1><label
class="screen-reader-text" for="cat">Categories</label><select
name='cat' id='cat' class='postform' ><option
value='-1'>Select Category</option><option
class="level-0" value="3">#biicontest2014</option><option
class="level-0" value="328">algorithms</option><option
class="level-0" value="350">Arduino</option><option
class="level-0" value="12">biicode</option><option
class="level-0" value="173">biicode-internals</option><option
class="level-0" value="7">biicoders</option><option
class="level-0" value="229">BITSCAN</option><option
class="level-0" value="372">c++</option><option
class="level-0" value="49">events</option><option
class="level-0" value="198">Gamedev</option><option
class="level-0" value="318">Integrations</option><option
class="level-0" value="209">Meta-programming</option><option
class="level-0" value="43">news</option><option
class="level-0" value="163">Our Story</option><option
class="level-0" value="269">Software design</option><option
class="level-0" value="50">try this out</option><option
class="level-0" value="225">ZeroMQ</option> </select> <script type='text/javascript'>/*  */
(function() {
	var dropdown = document.getElementById( "cat" );
	function onCatChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value > 0 ) {
			location.href = "http://blog.biicode.com/?cat=" + dropdown.options[ dropdown.selectedIndex ].value;
		}
	}
	dropdown.onchange = onCatChange;
})();
/*  */</script> </aside></div></div></div><div
id="containerfooter"> <footer><div
class="center"><div
class="footer-item company"><h3>About</h3><ul><li><a
href="http://web.biicode.com/about-us">Company</a></li><li><a
href="http://web.biicode.com/pricing">Pricing</a></li><li><a
href="http://web.biicode.com/jobs">Careers</a></li><li><a
href="http://web.biicode.com/meet-the-team">Team </a></li><li><a
href="http://web.biicode.com/contact-us/">Contact us </a></li></ul></div><div
class="footer-item contact"><h3>Features</h3><ul><li><a
href="http://web.biicode.com/features/arduino/">Arduino</a></li><li><a
href="http://web.biicode.com/features/raspberry-pi/">Raspberry Pi</a></li><li><a
href="http://web.biicode.com/features/cpp/">C/C++</a></li><li><a
href="http://web.biicode.com/features/nodejs/">Node.js</a></li></ul></div><div
class="footer-item resources"><h3>Resources</h3><ul><li><a
href="http://web.biicode.com/learn/getting-started">Getting Started</a></li><li><a
href="https://www.biicode.com/downloads">Downloads </a></li><li><a
href="http://www.biicode.com/explore">Explore</a></li><li><a
href="http://docs.biicode.com/">Documentation</a></li><li><a
href="http://forum.biicode.com/">Forum</a></li><li><a
href="../index.html">Blog</a></li></ul></div><div
class="footer-item resources"><h3>Community</h3><ul><li><a
href="http://web.biicode.com/community/friends/">Friends</a></li><li><a
href="http://web.biicode.com/community/roadmap/">Roadmap</a></li></ul></div><div
class="signupfooter"><div
id="signupfooter-bt"> <img
src="../wp-content/themes/truly-minimal-wpcom/img/footer/bt-sign-up-footer-on.png" /> <a
href="https://www.biicode.com/accounts/signup/"><img
class="top" src="../wp-content/themes/truly-minimal-wpcom/img/footer/bt-sign-up-footer-off.png" /></a></div><div
id="socialiconsfooter-bt"> <img
src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-fb-footer-on.png" /> <a
href="https://www.facebook.com/Biicode"><img
class="top" src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-fb-footer-off.png" /></a></div><div
id="socialiconsfooter-bt"> <img
src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-twitter-footer-on.png" /> <a
href="https://twitter.com/biicode"><img
class="top" src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-twitter-footer-off.png" /></a></div><div
id="socialiconsfooter-bt"> <img
src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-google-footer-on.png" /> <a
href="https://plus.google.com/110838391970414654069/posts"><img
class="top" src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-google-footer-off.png" /></a></div><div
id="socialiconsfooter-bt"> <img
src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-linkedin-footer-on.png" /> <a
href="http://www.linkedin.com/company/biicode"><img
class="top" src="../wp-content/themes/truly-minimal-wpcom/img/footer/icon-linkedin-footer-off.png" /></a></div></div><div
class="center copyright"> <img
src="../wp-content/themes/truly-minimal-wpcom/img/footer/biicoce-logo-footer.png" class="logo" width="32" height="42" /><p>© 2014 Biicode. All rights reserved · <a
href="http://web.biicode.com/legal/terms-and-conditions">Terms and conditions</a> · <a
href="http://web.biicode.com/legal/privacy-policy">Privacy Policy</a> · <a
href="http://web.biicode.com/legal/community-guidelines">Community guidelines</a></p></div></div> </footer></div>
 <script type="text/javascript">//
			jQuery(document).ready(function() {
				// Edit 09/05: remove globals and package into Object Literal, and removed the debug function
				cli_show_cookiebar({
					html: '<div id="cookie-law-info-bar"><span>This website uses cookies to improve your experience. We\'ll assume you\'re ok with this, but you can opt-out if you wish.<a href=\"#\" id=\"cookie_action_close_header\"  class=\"medium cli-plugin-button cli-plugin-main-button\" >Accept</a> <a href=\"http://web.biicode.com/legal/privacy-policy/\" id=\"CONSTANT_OPEN_URL\" target=\"_new\"  class=\"cli-plugin-main-link\"  >Read More</a></span></div><div id="cookie-law-info-again"><span id="cookie_hdr_showagain">Privacy & Cookies Policy</span></div>',
					settings: '{"animate_speed_hide":"500","animate_speed_show":"500","background":"#fff","border":"#444","border_on":true,"button_1_button_colour":"#000000","button_1_button_hover":"#000000","button_1_link_colour":"#fff","button_1_as_button":true,"button_2_button_colour":"#333","button_2_button_hover":"#292929","button_2_link_colour":"#444","button_2_as_button":false,"font_family":"Arial, Helvetica, sans-serif","notify_animate_hide":true,"notify_animate_show":false,"notify_div_id":"#cookie-law-info-bar","notify_position_horizontal":"right","notify_position_vertical":"bottom","scroll_close":false,"scroll_close_reload":false,"showagain_tab":true,"showagain_background":"#fff","showagain_border":"#000","showagain_div_id":"#cookie-law-info-again","showagain_x_position":"100px","text":"#000","show_once_yn":false,"show_once":"10000"}'
				});
			});
			//</script> <script type="text/javascript">// 
        var disqus_shortname = 'biicodeblog';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        //</script><script type="text/javascript">if (typeof(addthis_share) == "undefined"){ addthis_share = {"passthrough":{"twitter":{"via":"biicode"}}};}

var addthis_config = {"data_track_clickback":false,"data_track_addressbar":false,"data_track_textcopy":false,"ui_atversion":"300"};
var addthis_product = 'wpp-4.0.7';
</script><script type="text/javascript" src="../../s7.addthis.com/js/300/addthis_widget.js#pubid=ra-522dcd676fbf553f"></script><script type="text/javascript">
jQuery(window).load(function(){
  var q2w3_sidebar_1_options = { "sidebar" : "sidebar-1", "margin_top" : 10, "margin_bottom" : 450, "screen_max_width" : 0, "width_inherit" : false, "widgets" : ['text-2','text-3','categories-2'] };
  q2w3_sidebar(q2w3_sidebar_1_options);
  setInterval(function () { q2w3_sidebar(q2w3_sidebar_1_options); }, 1500);
});
</script>
<script type='text/javascript' src='../wp-content/themes/truly-minimal-wpcom/js/navigation11a8.js?ver=20120206'></script>
<script type='text/javascript' src='../wp-content/themes/truly-minimal-wpcom/js/skip-link-focus-fix08e0.js?ver=20130115'></script>
<script type='text/javascript' src='../wp-includes/js/comment-reply.mind19b.js?ver=4.2.5'></script>
<!--wp_footer-->
</body>

<!-- Mirrored from blog.biicode.com/template-metaprogramming-with-modern-cpp-introduction/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 03 Jan 2016 00:43:56 GMT -->
</html>