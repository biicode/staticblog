<?xml version="1.0" encoding="UTF-8"?><rss
version="2.0"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:wfw="http://wellformedweb.org/CommentAPI/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
> <channel><title>biicode Blog &#187; CMake toolchains</title> <atom:link href="http://blog.biicode.com/tag/cmake-toolchains/feed/" rel="self" type="application/rss+xml" /><link>http://blog.biicode.com</link> <description>Almost daily C and C++ jibby jabba</description> <lastBuildDate>Sun, 16 Aug 2015 07:58:20 +0000</lastBuildDate> <language>en-US</language> <sy:updatePeriod>hourly</sy:updatePeriod> <sy:updateFrequency>1</sy:updateFrequency> <generator>http://wordpress.org/?v=4.2.5</generator> <item><title>Using your custom CMake toolchain</title><link>http://blog.biicode.com/custom-cmake-toolchain/</link> <comments>http://blog.biicode.com/custom-cmake-toolchain/#comments</comments> <pubDate>Mon, 20 Oct 2014 10:42:38 +0000</pubDate> <dc:creator><![CDATA[julia]]></dc:creator> <category><![CDATA[try this out]]></category> <category><![CDATA[cmake]]></category> <category><![CDATA[CMake toolchains]]></category> <guid
isPermaLink="false">http://blog.biicode.com/?p=1815</guid> <description><![CDATA[<p>OUTDATED: Check the new way to customize your toolchain with biicode in this post: Raspberry PI cross building native (C/C++) Step by step we are making biicode easier to customize, our latest addition is to allow users using a custom CMake toolchain instead of the autogenerated one. The problem with CMake toolchains The main problem [&#8230;]</p><p>The post <a
rel="nofollow" href="http://blog.biicode.com/custom-cmake-toolchain/">Using your custom CMake toolchain</a> appeared first on <a
rel="nofollow" href="http://blog.biicode.com">biicode Blog</a>.</p> ]]></description> <content:encoded><![CDATA[<p><strong>OUTDATED:</strong> Check the new way to customize your toolchain with biicode in this post:<a
title="Raspberry Pi toolchain updated" href="http://blog.biicode.com/raspberry-pi-cross-building-opengl-glfw-windows"> Raspberry PI cross building native (C/C++)</a></p><p>Step by step we are making biicode easier to customize, our latest addition is to allow users using a custom CMake toolchain instead of the autogenerated one.<img
class="aligncenter wp-image-1819 size-full" src="http://blog.biicode.com/wp-content/uploads/sites/2/2014/10/cmakebanner.jpg" alt="CMake toolchain is easier to customize now with biiicode" width="532" height="147" /> <span
id="more-1815"></span></p><h2>The problem with CMake toolchains</h2><p>The main problem achieving this is that toolchains have absolute routes to compilers so they are difficult to share as part of a biicode block so, in addition to providing toolchain customization we also provide a token replacement system which you can configure in your <a
href="http://docs.biicode.com/c++/reference/configuration_files/settings.html">project settings.</a></p><h2>Example of how to customize CMake toolchains</h2><p
class="">Take the block <a
href="http://www.biicode.com/fenix/armadillo">fenix/armadillo</a>. It requires gcc &gt;= 4.7.2 to compile, but the default rpi compiler is 4.7.1, so we’d like to define our toolchain and share it so other people can use it. Biicode installs different rpi compilers in BII_ENV folder, so you can choose a different one for this task. You can create a toolchain file in your block like this:</p><p></p><pre class="crayon-plain-tag">INCLUDE(CMakeForceCompiler)
SET(CMAKE_SYSTEM_NAME Linux)
SET(CMAKE_SYSTEM_VERSION 1)
SET(CMAKE_C_COMPILER BII_ENV/raspberry_cross_compilers/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin/arm-linux-gnueabihf-gcc)
SET(CMAKE_CXX_COMPILER BII_ENV/raspberry_cross_compilers/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin/arm-linux-gnueabihf-g++)</pre><p>Now if you want to use this toolchain you can modify your project settings to include the bold line:</p><pre class="crayon-plain-tag">cpp: {cross_build: ARM, generator: Unix Makefiles,
      toolchain: {"path":fenix/armadillo/rpi_toolchain.cmake}}
os: {arch: 64bit, family: Linux, subfamily: Ubuntu, version: '13.10'}
rpi: {directory: armadillo, ip: 192.168.1.101, user: pi}</pre><p>If you want to share your toolchain with people reusing your block you will also need to add it to your bii/dependencies.bii (inside your block):</p><pre class="crayon-plain-tag">+ rpi_toolchain.cmake</pre><p>And that’s all, this will work for anyone that has installed cross compilers by running</p><p><code>bii setup:rpi</code>. BII_ENV will expand to default bii tools installation directory. But you can provide even more flexibility to your block’s users and allow them to use any compiler they want by defining replacement tokens, for example:</p><pre class="crayon-plain-tag">INCLUDE(CMakeForceCompiler)
SET(CMAKE_SYSTEM_NAME Linux)
SET(CMAKE_SYSTEM_VERSION 1)
SET(CMAKE_C_COMPILER COMPILER_PATH/bin/COMPILER_NAME-gcc)
SET(CMAKE_CXX_COMPILER COMPILER_PATH/bin/COMPILER_NAME-g++)</pre><p>Then you can set your <a
href="http://docs.biicode.com/c++/reference/configuration_files/settings.html">settings</a> as follows:</p><pre class="crayon-plain-tag">cpp: {cross_build: ARM, generator: Unix Makefiles,
      toolchain: {"path": fenix/armadillo/rpi_toolchain.cmake,
                  "replacements": {COMPILER_PATH: /home/julia/raspberry_cross_compilers/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian
               COMPILER_NAME: gcc-linaro-arm-linux}}}
os: {arch: 64bit, family: Linux, subfamily: Ubuntu, version: '13.10'}
rpi: {directory: armadillo, ip: 192.168.1.101, user: pi}</pre><p></p><h3>Conclusions</h3><p>Some times our users make us realize we are not providing them all the flexibility they need. Adding this feature was quite easy in fact, but without your feedback we would not have thought of it.</p><p>So please keep contributing with your ideas, unresolved problems and opinions. I hope you liked the example and if you have any doubts or questions please feel free to comment the post, share it in our <a
href="http://forum.biicode.com">Forum</a> or check our <a
href="http://docs.biicode.com">Documentation</a>.</p><p>The post <a
rel="nofollow" href="http://blog.biicode.com/custom-cmake-toolchain/">Using your custom CMake toolchain</a> appeared first on <a
rel="nofollow" href="http://blog.biicode.com">biicode Blog</a>.</p> ]]></content:encoded> <wfw:commentRss>http://blog.biicode.com/custom-cmake-toolchain/feed/</wfw:commentRss> <slash:comments>1</slash:comments> </item> </channel> </rss>